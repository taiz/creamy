package creamy.scene.control;

import creamy.browser.Broker;
import creamy.browser.RequestHelper;
import creamy.mvc.Request;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.control.Button;

public class CFLinkButton extends Button implements UnitRequest {
    
    private RequestHelper helper;
    private StringProperty method;
    private StringProperty path;
    
    public CFLinkButton() {
        helper = new RequestHelper(this);
        method = new SimpleStringProperty(Request.GET);
        path = new SimpleStringProperty();
        
        this.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                Broker broker = helper.getBroker();
                if (broker == null) return;
                broker.sendRequest(CFLinkButton.this);
            }
        });
        //this.setStyle("-fx-text-fill: #0000ff;");
    }

    public CFLinkButton(String path) {
        this();
        this.path.set(path);
    }
    
    @Override
    public String getMethod() {
        return method.get();
    }
    
    @Override
    public String getPath() {
        return path.get();
    }

    public void setPath(String path) {
        this.path.set(path);
    }
}
