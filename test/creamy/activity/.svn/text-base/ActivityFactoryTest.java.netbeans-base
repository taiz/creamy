/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package creamy.activity;

import creamy.mvc.Controller;
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.junit.*;
import static org.junit.Assert.*;

/**
 *
 * @author ATakahashi
 */
public class ActivityFactoryTest {
    
    public ActivityFactoryTest() {
    }

    /**
     * Test of getInstance method, of class ActivityFactory.
     */
    @Test
    public void testGetInstance() {
        System.out.println("getInstance");
        ActivityFactory expResult = ActivityFactory.getInstance();
        ActivityFactory result = ActivityFactory.getInstance();
        //参照先が同じか
        assert(expResult == result);
        //Nullではないこと
        assertNotNull(result);
    }

    /**
     * Test of render method, of class ActivityFactory.
     */
    @Test
    public void testRender_Class_Controller() {
        System.out.println("render");
        Class<? extends Activity> activityClass = null;
        Controller controller = null;
        ActivityFactory instance = ActivityFactory.getInstance();;
        Activity expResult = null;
        Activity result = instance.createActivity(activityClass, controller);
        assertEquals(expResult, result);
    }

    /**
     * Test of render method, of class ActivityFactory.
     */
    @Test
    public void testRender_Class_Activity() {
        System.out.println("render");
        Class<? extends Activity> activityClass = null;
        Activity parent = new ActivityFactoryTest_TestActivity();
        ActivityFactory instance = ActivityFactory.getInstance();;
        Activity expResult = null;
        Activity result = instance.createActivity(activityClass, parent);
        assertEquals(expResult, result);
    }
    
    public class ActivityFactoryTest_TestActivity extends Activity {

        public String title() { return "TestActivity"; }

        @Override
        public void initialize() {}
    }
    
    public class ActivityFactoryTest_TestClass {
        private String param1 = "value1";
        private String param2 = "value2";
        private String param3 = "value3";
    }

    /**
     * Test of createActivity method, of class ActivityFactory.
     * Templateありの場合のテスト
     */
    @Test
    public void testCreateActivity_Class_Controller_Template() {
        System.out.println("createActivity...use Template");
        
        // Activityインスタンスを作成
        Class<? extends Activity> activityClass = null;
        try {
            activityClass = (Class<? extends Activity>) Class.forName("views.TestCreate_Template");
        } catch (ClassNotFoundException ex) {
            fail("ClassNotFoundException:" + ex.getMessage());
        }
        // Controllerインスタンスを作成
        Controller controller = null;
        try {
            Class<?> clazz = Class.forName("controllers.Application");
            controller = (Controller) clazz.getConstructor().newInstance();
        } catch (ClassNotFoundException ex) {
            fail("ClassNotFoundException:" + ex.getMessage());
        } catch (InstantiationException | IllegalAccessException | IllegalArgumentException |
                InvocationTargetException | NoSuchMethodException | SecurityException ex) {
            fail("InstantiationException:" + ex.getMessage());
        }
        // ActivityFactoryインスタンスを作成
        ActivityFactory instance = ActivityFactory.getInstance();
        Activity result = instance.createActivity(activityClass, controller);
        
        // TestCreateクラスはMainをTemplateとして使うので、タイトルに「Creamy」が付く
        assertEquals("Creamy:Test Create Activity", result.getTitle());
    }

    /**
     * Test of createActivity method, of class ActivityFactory.
     * Templateなしの場合のテスト
     */
    @Test
    public void testCreateActivity_Class_Controller() {
        System.out.println("createActivity...not use Template");
        
        // Activityインスタンスを作成
        Class<? extends Activity> activityClass = null;
        try {
            activityClass = (Class<? extends Activity>) Class.forName("views.TestCreate");
        } catch (ClassNotFoundException ex) {
            fail("ClassNotFoundException:" + ex.getMessage());
        }
        // Controllerインスタンスを作成
        Controller controller = null;
        try {
            Class<?> clazz = Class.forName("controllers.Application");
            controller = (Controller) clazz.getConstructor().newInstance();
        } catch (ClassNotFoundException ex) {
            fail("ClassNotFoundException:" + ex.getMessage());
        } catch (InstantiationException | IllegalAccessException | IllegalArgumentException |
                InvocationTargetException | NoSuchMethodException | SecurityException ex) {
            fail("InstantiationException:" + ex.getMessage());
        }
        // ActivityFactoryインスタンスを作成
        ActivityFactory instance = ActivityFactory.getInstance();
        Activity result = instance.createActivity(activityClass, controller);
        
        // TestCreateクラスはMainをTemplateとして使うので、タイトルに'Creamy:'が付く
        assertEquals("Test Create Activity", result.getTitle());
    }

    /**
     * Test of createActivity method, of class ActivityFactory.
     */
    @Test
    public void testCreateActivity_Class_Activity() {
        System.out.println("createActivity");
        Class<? extends Activity> activityClass = null;
        Activity parent = null;
        ActivityFactory instance = null;
        Activity expResult = null;
        Activity result = instance.createActivity(activityClass, parent);
        assertEquals(expResult, result);
        // TODO review the generated test code and remove the default call to fail.
        fail("The test case is a prototype.");
    }    
}
